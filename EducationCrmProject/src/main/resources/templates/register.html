<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SP register</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>
<body>
  <!-- Header starts -->
       <div th:replace="~{fragments/header :: crm-header}"></div>
  <!-- Header ends-->	

  <!-- Main Content -->
  <main class="container-fluid" style="min-height: 550px;">
    <section class="container py-5 bg-light">
      <h3 class="text-center mb-4">Register Here</h3>
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-6">
          <!-- onsubmit hata diya -->
          <form action="regForm" method="post" th:object="${user}">
            <div class="card shadow p-5">
              <div th:if="${successMsg}" class="mb-3 alert alert-success" role="alert">
                <span th:text="${successMsg}"></span>
              </div>
              <div class="mb-3">
                <label class="form-label">Name :</label>
                <input type="text" class="form-control" name="name" th:field="*{name}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
              </div>
              <div class="mb-3">
                <label class="form-label">Email :</label>
                <input type="email" class="form-control" name="email" th:field="*{email}" required>
                <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
              </div>
              <div class="mb-3">
                <label class="form-label">Password :</label>
                <input type="password" class="form-control" name="password" th:field="*{password}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
              </div>
              <div class="mb-3">
                <label class="form-label">Phone No :</label>
                <input type="text" class="form-control" name="phoneno" th:field="*{phoneno}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('phoneno')}" th:errors="*{phoneno}"></div>
              </div>
              <div class="mb-3">
                <label class="form-label">City :</label>
                <input type="text" class="form-control" name="city" th:field="*{city}" required>
                <div class="text-danger" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></div>
              </div>
              <button type="submit" class="btn btn-primary">Register</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer starts -->
          <div th:replace="~{fragments/footer :: crm-footer}"></div>
  <!-- Footer Ends -->
  

  <!-- JS Validation (commented out)
  <script>
    function validateForm() {
      var name = document.forms[0]["name"].value;
      var email = document.forms[0]["email"].value;
      var password = document.forms[0]["password"].value;
      var phoneno = document.forms[0]["phoneno"].value;
      var city = document.forms[0]["city"].value;

      var namePattern = /^[a-zA-Z ]{5,25}$/;
      var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      var passwordPattern = /^[a-zA-Z0-9]{5,25}$/;
      var phonenoPattern = /^[0-9]{10}$/;
      var cityPattern = /^[a-zA-Z]{3,25}$/;

      if (!namePattern.test(name)) { alert("Invalid name"); return false; }
      if (!emailPattern.test(email)) { alert("Invalid email"); return false; }
      if (!passwordPattern.test(password)) { alert("Invalid password"); return false; }
      if (!phonenoPattern.test(phoneno)) { alert("Invalid phone number"); return false; }
      if (!cityPattern.test(city)) { alert("Invalid city"); return false; }
      return true;
    }
  </script>
  -->

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</body>
</html>
